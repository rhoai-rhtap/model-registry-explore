{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": ["config:recommended"],
  "branchPrefix": "renovate/",
  "baseBranches": ["main", "test-1"],
  "enabledManagers": ["dockerfile", "tekton"],
  "dockerfile": {
    "enabled": true, 
    "schedule": ["at any time"],
    "fileMatch": ["^.*Dockerfile\\.konflux.*$"], 
    "additionalBranchPrefix": "{{baseBranch}}/", 
    "branchPrefix": "konflux/mintmaker/", 
    "ignoreTests": true,
    "automergeType": "pr",
    "automerge": true
  },
  "tekton": {
    "enabled": true,
    "schedule": ["at any time"],
    "fileMatch": [".tekton/**/*.yaml", ".tekton/**/*.yml"],
    "packageRules": [
      {
        "matchUpdateTypes": ["digest"],
        "enabled": true,
        "groupName": "Konflux references",
        "branchPrefix": "konflux/references/",
        "semanticCommits": "enabled",
        "prFooter": "To execute skipped test pipelines write comment `/ok-to-test`",
        "matchPackageNames": [
          "/^quay.io/redhat-appstudio-tekton-catalog//",
          "/^quay.io/konflux-ci/tekton-catalog//"
        ]
      }
    ]
  },
  "packageRules": [
    {
      "matchManagers": ["dockerfile"],
      "matchBaseBranches": ["main"],
      "matchFileNames": ["*Dockerfile.konflux*"],
      "matchUpdateTypes": ["digest"],
      "enabled": true,
      "groupName": "Dockerfile Digest Updates - Main",
      "branchPrefix": "renovate/docker-main/",
      "semanticCommits": "enabled",
      "schedule": ["at any time"]
    },
    {
      "matchManagers": ["dockerfile"],
      "enabled": false,
      "matchUpdateTypes": ["major", "minor", "pin", "pinDigest", "patch", "bump"]
    },
    {
      "matchManagers": ["tekton"],
      "matchBaseBranches": ["test-1"],
      "matchFileNames": [".tekton/**/*.yaml", ".tekton/**/*.yml"],
      "matchUpdateTypes": ["digest"],
      "enabled": true,
      "groupName": "Tekton Updates - test-1",
      "branchPrefix": "renovate/tekton-test-1/",
      "semanticCommits": "enabled",
      "prFooter": "To execute skipped test pipelines write comment `/ok-to-test`",
      "matchPackageNames": [
        "/^quay.io/redhat-appstudio-tekton-catalog//",
        "/^quay.io/konflux-ci/tekton-catalog//"
      ],
      "schedule": ["at any time"]
    },
    {
      "matchManagers": ["tekton"],
      "enabled": false,
      "matchUpdateTypes": ["major", "minor", "pin", "pinDigest", "patch", "bump"]
    }
  ]
}
